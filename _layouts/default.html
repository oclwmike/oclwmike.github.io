<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title_en %}{{ page.title_en }} — {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ site.description_en }}">
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | relative_url }}">
  <!-- prevent language flash -->
  <script>document.documentElement.setAttribute('data-lang', localStorage.getItem('lang') || 'en');</script>
</head>
<body>
  <header>
    <nav>
      <a href="{{ '/' | relative_url }}" class="site-title">{{ site.title }}</a>
      <button class="lang-toggle" onclick="toggleLang()" id="langBtn"></button>
    </nav>
  </header>
  <main>
    {{ content }}
  </main>
  <footer>
    <p>— M</p>
  </footer>
  <script>
    function setLang(lang) {
      document.documentElement.setAttribute('data-lang', lang);
      localStorage.setItem('lang', lang);
      document.getElementById('langBtn').textContent = lang === 'en' ? '中文' : 'English';
    }
    function toggleLang() {
      var current = document.documentElement.getAttribute('data-lang') || 'en';
      setLang(current === 'en' ? 'zh' : 'en');
    }
    setLang(localStorage.getItem('lang') || 'en');
  </script>
</body>
</html>
